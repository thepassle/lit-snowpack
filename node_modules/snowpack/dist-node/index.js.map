{"version":3,"file":"index.js","sources":["../dist-src/rollup-plugin-treeshake-inputs.js","../dist-src/rollup-plugin-remote-resolve.js","../dist-src/scan-imports.js","../dist-src/index.js"],"sourcesContent":["/**\n * rollup-plugin-treeshake-inputs\n *\n * How it works:\n * 1. An array of \"install targets\" are passed in, describing all known imports + metadata.\n * 2. Known imports are marked for tree-shaking by appending 'pika-treeshake:' to the input value.\n * 3. On load, we return a false virtual file for all \"pika-treeshake:\" inputs.\n *    a. That virtual file contains only `export ... from 'ACTUAL_FILE_PATH';` exports\n *    b. Rollup uses those exports to drive its tree-shaking algorithm.\n */\nexport function rollupPluginTreeshakeInputs(allImports) {\n    const installTargetsByFile = {};\n    return {\n        name: 'pika:treeshake-inputs',\n        // Mark some inputs for tree-shaking.\n        options(inputOptions) {\n            for (const [key, val] of Object.entries(inputOptions.input)) {\n                installTargetsByFile[val] = allImports.filter(imp => imp.specifier === key);\n                // If an input has known install targets, and none of those have \"all=true\", mark for treeshaking.\n                if (installTargetsByFile[val].length > 0 &&\n                    !installTargetsByFile[val].some(imp => imp.all)) {\n                    inputOptions.input[key] = `pika-treeshake:${val}`;\n                }\n            }\n            return inputOptions;\n        },\n        resolveId(source) {\n            if (source.startsWith('pika-treeshake:')) {\n                return source;\n            }\n            return null;\n        },\n        load(id) {\n            if (!id.startsWith('pika-treeshake:')) {\n                return null;\n            }\n            const fileLoc = id.substring('pika-treeshake:'.length);\n            // Reduce all install targets into a single \"summarized\" install target.\n            const treeshakeSummary = installTargetsByFile[fileLoc].reduce((summary, imp) => {\n                summary.default = summary.default || imp.default;\n                summary.namespace = summary.namespace || imp.namespace;\n                summary.named = [...summary.named, ...imp.named];\n                return summary;\n            });\n            const uniqueNamedImports = new Set(treeshakeSummary.named);\n            const result = `\n        ${treeshakeSummary.namespace ? `export * from '${fileLoc}';` : ''}\n        ${treeshakeSummary.default\n                ? `import __pika_web_default_export_for_treeshaking__ from '${fileLoc}'; export default __pika_web_default_export_for_treeshaking__;`\n                : ''}\n        ${`export {${[...uniqueNamedImports].join(',')}} from '${fileLoc}';`}\n      `;\n            return result;\n        },\n    };\n}\n","/**\n * rollup-plugin-remote-resolve\n *\n * Rewrites imports for \"remote packages\" to point to the remote URL instead.\n * This shouldn't ever run by default, but must be activated via config.\n */\nexport function rollupPluginRemoteResolve({ remoteUrl, remotePackages, }) {\n    const remotePackageMap = new Map(remotePackages);\n    return {\n        name: 'pika:peer-dependency-resolver',\n        resolveId(source) {\n            if (remotePackageMap.has(source)) {\n                let urlSourcePath = source;\n                // NOTE(@fks): This is really Pika CDN specific, but no one else should be using this option.\n                if (source === 'react' || source === 'react-dom') {\n                    urlSourcePath = '_/' + source;\n                }\n                return {\n                    id: `${remoteUrl}/${urlSourcePath}/${remotePackageMap.get(source)}`,\n                    external: true,\n                    isExternal: true,\n                };\n            }\n            return null;\n        },\n        load(id) {\n            return null;\n        },\n    };\n}\n","import nodePath from 'path';\nimport fs from 'fs';\nimport glob from 'glob';\nimport { parse } from '@babel/parser';\nimport traverse from '@babel/traverse';\nfunction stripJsExtension(dep) {\n    return dep.replace(/\\.m?js$/i, '');\n}\nfunction createInstallTarget(specifier, all = true) {\n    return {\n        specifier,\n        all,\n        default: false,\n        namespace: false,\n        named: [],\n    };\n}\n/**\n * parses an import specifier, looking for a web modules to install. If a web module is not detected,\n * null is returned.\n */\nfunction parseWebModuleSpecifier(specifier, knownDependencies) {\n    const webModulesIndex = specifier.indexOf('web_modules/');\n    if (webModulesIndex === -1) {\n        return null;\n    }\n    // check if the resolved specifier (including file extension) is a known package.\n    const resolvedSpecifier = specifier.substring(webModulesIndex + 'web_modules/'.length);\n    if (knownDependencies.includes(resolvedSpecifier)) {\n        return resolvedSpecifier;\n    }\n    // check if the resolved specifier (without extension) is a known package.\n    const resolvedSpecifierWithoutExtension = stripJsExtension(resolvedSpecifier);\n    if (knownDependencies.includes(resolvedSpecifierWithoutExtension)) {\n        return resolvedSpecifierWithoutExtension;\n    }\n    // Otherwise, this is an explicit import to a file within a package.\n    return resolvedSpecifier;\n}\nfunction getInstallTargetsForFile(filePath, code, knownDependencies) {\n    const allImports = [];\n    try {\n        const ast = parse(code, { plugins: ['dynamicImport'], sourceType: 'module' });\n        traverse(ast, {\n            ImportDeclaration(path) {\n                const webModuleSpecifier = parseWebModuleSpecifier(path.node.source.value, knownDependencies);\n                if (webModuleSpecifier) {\n                    allImports.push({\n                        specifier: webModuleSpecifier,\n                        all: false,\n                        default: path.node.specifiers.some(s => s.type === 'ImportDefaultSpecifier'),\n                        namespace: path.node.specifiers.some(s => s.type === 'ImportNamespaceSpecifier'),\n                        named: path.node.specifiers\n                            .map(s => s.type === 'ImportSpecifier' && s.imported.name)\n                            .filter(Boolean),\n                    });\n                }\n            },\n            Import(path) {\n                // Only match dynamic imports that are called as a function\n                if (path.parent.type !== 'CallExpression') {\n                    return;\n                }\n                // Only match dynamic imports called with a single string argument\n                const [argNode] = path.parent.arguments;\n                if (argNode.type !== 'StringLiteral') {\n                    return;\n                }\n                // Analyze that string argument as an import specifier\n                const webModuleSpecifier = parseWebModuleSpecifier(argNode.value, knownDependencies);\n                if (webModuleSpecifier) {\n                    allImports.push(createInstallTarget(webModuleSpecifier, true));\n                }\n            },\n        });\n    }\n    catch (e) {\n        console.error(`[PARSE ERROR]: Skipping ${filePath}`);\n        return [];\n    }\n    return allImports;\n}\nexport function scanDepList(depList, cwd) {\n    const nodeModulesLoc = nodePath.join(cwd, 'node_modules');\n    return depList\n        .map(whitelistItem => {\n        if (!glob.hasMagic(whitelistItem)) {\n            return [createInstallTarget(whitelistItem, true)];\n        }\n        else {\n            return scanDepList(glob.sync(whitelistItem, { cwd: nodeModulesLoc, nodir: true }), cwd);\n        }\n    })\n        .reduce((flat, item) => flat.concat(item), []);\n}\nexport function scanImports({ include, exclude, knownDependencies, }) {\n    const includeFiles = glob.sync(include, { ignore: exclude, nodir: true });\n    if (!includeFiles.length) {\n        console.warn(`[SCAN ERROR]: No files matching \"${include}\"`);\n        return [];\n    }\n    // Scan every matched JS file for web dependency imports\n    return includeFiles\n        .filter(filePath => filePath.endsWith('.js') || filePath.endsWith('mjs'))\n        .map(filePath => [filePath, fs.readFileSync(filePath, 'utf8')])\n        .map(([filePath, code]) => getInstallTargetsForFile(filePath, code, knownDependencies))\n        .reduce((flat, item) => flat.concat(item), [])\n        .sort((impA, impB) => impA.specifier.localeCompare(impB.specifier));\n}\n","import fs from 'fs';\nimport path from 'path';\nimport rimraf from 'rimraf';\nimport mkdirp from 'mkdirp';\nimport chalk from 'chalk';\nimport ora from 'ora';\nimport yargs from 'yargs-parser';\nimport resolveFrom from 'resolve-from';\nimport babelPresetEnv from '@babel/preset-env';\nimport isNodeBuiltin from 'is-builtin-module';\nimport * as rollup from 'rollup';\nimport rollupPluginNodeResolve from 'rollup-plugin-node-resolve';\nimport rollupPluginCommonjs from 'rollup-plugin-commonjs';\nimport { terser as rollupPluginTerser } from 'rollup-plugin-terser';\nimport rollupPluginReplace from 'rollup-plugin-replace';\nimport rollupPluginJson from 'rollup-plugin-json';\nimport rollupPluginBabel from 'rollup-plugin-babel';\nimport { rollupPluginTreeshakeInputs } from './rollup-plugin-treeshake-inputs.js';\nimport { rollupPluginRemoteResolve } from './rollup-plugin-remote-resolve.js';\nimport { scanImports, scanDepList } from './scan-imports.js';\nconst cwd = process.cwd();\nconst banner = chalk.bold(`snowpack`) + ` installing... `;\nconst installResults = [];\nlet spinner = ora(banner);\nlet spinnerHasError = false;\nfunction printHelp() {\n    console.log(`\n${chalk.bold(`snowpack`)} - Install npm dependencies to run natively on the web.\n${chalk.bold('Options:')}\n    --dest              Specify destination directory (default: \"web_modules/\").\n    --clean             Clear out the destination directory before install.\n    --optimize          Transpile, minify, and optimize installed dependencies for production.\n    --babel             Transpile installed dependencies. Also enabled with \"--optimize\".\n    --include           Auto-detect imports from file(s). Supports glob.\n    --exclude           Exclude files from --include. Follows glob’s ignore pattern.\n    --strict            Only install pure ESM dependency trees. Fail if a CJS module is encountered.\n    --no-source-map     Skip emitting source map files (.js.map) into dest\n${chalk.bold('Advanced:')}\n    --remote-package    \"name,version\" pair(s) of packages that should be left unbundled and referenced remotely.\n                        Example: \"foo,v4\" will rewrite all imports of \"foo\" to \"{remoteUrl}/foo/v4\" (see --remote-url).\n    --remote-url        Configures the domain where remote imports point to (default: \"https://cdn.pika.dev\")\n    `.trim());\n}\nfunction formatInstallResults(skipFailures) {\n    return installResults\n        .map(([d, yn]) => (yn ? chalk.green(d) : skipFailures ? chalk.dim(d) : chalk.red(d)))\n        .join(', ');\n}\nfunction logError(msg) {\n    if (!spinnerHasError) {\n        spinner.stopAndPersist({ symbol: chalk.cyan('⠼') });\n    }\n    spinnerHasError = true;\n    spinner = ora(chalk.red(msg));\n    spinner.fail();\n}\nclass ErrorWithHint extends Error {\n    constructor(message, hint) {\n        super(message);\n        this.hint = hint;\n    }\n}\n// Add common, well-used non-esm packages here so that Rollup doesn't die trying to analyze them.\nconst PACKAGES_TO_AUTO_DETECT_EXPORTS = [\n    path.join('react', 'index.js'),\n    path.join('react-dom', 'index.js'),\n    path.join('react-is', 'index.js'),\n    path.join('prop-types', 'index.js'),\n    path.join('rxjs', 'Rx.js'),\n];\nfunction detectExports(filePath) {\n    try {\n        const fileLoc = resolveFrom(cwd, filePath);\n        if (fs.existsSync(fileLoc)) {\n            return Object.keys(require(fileLoc)).filter(e => e[0] !== '_');\n        }\n    }\n    catch (err) {\n        // ignore\n    }\n}\n/**\n * Resolve a \"webDependencies\" input value to the correct absolute file location.\n * Supports both npm package names, and file paths relative to the node_modules directory.\n * Follows logic similar to Node's resolution logic, but using a package.json's ESM \"module\"\n * field instead of the CJS \"main\" field.\n */\nfunction resolveWebDependency(dep, isExplicit) {\n    // if the path includes a file extension, just use it\n    if (path.extname(dep)) {\n        const isJSFile = ['.js', '.mjs', '.cjs'].includes(path.extname(dep));\n        return {\n            type: isJSFile ? 'JS' : 'ASSET',\n            loc: resolveFrom(cwd, dep),\n        };\n    }\n    const depManifestLoc = resolveFrom(cwd, `${dep}/package.json`);\n    const depManifest = require(depManifestLoc);\n    let foundEntrypoint = depManifest['browser:module'] || depManifest.module || depManifest.browser;\n    // If the package was a part of the explicit whitelist, fallback to it's main CJS entrypoint.\n    if (!foundEntrypoint && isExplicit) {\n        foundEntrypoint = depManifest.main || 'index.js';\n    }\n    if (!foundEntrypoint) {\n        throw new ErrorWithHint(`dependency \"${dep}\" has no native \"module\" entrypoint.`, chalk.italic(`Tip: Find modern, web-ready packages at ${chalk.underline('https://www.pika.dev')}`));\n    }\n    if (dep === 'react' && foundEntrypoint === 'index.js') {\n        throw new ErrorWithHint(`dependency \"react\" has no native \"module\" entrypoint.`, chalk.italic(`See: ${chalk.underline('https://github.com/pikapkg/web#a-note-on-react')}`));\n    }\n    return {\n        type: 'JS',\n        loc: path.join(depManifestLoc, '..', foundEntrypoint),\n    };\n}\n/**\n * Formats the snowpack dependency name from a \"webDependencies\" input value:\n * 2. Remove any \".js\"/\".mjs\" extension (will be added automatically by Rollup)\n */\nfunction getWebDependencyName(dep) {\n    return dep.replace(/\\.m?js$/i, '');\n}\nexport async function install(installTargets, { isCleanInstall, destLoc, hasBrowserlistConfig, isExplicit, isStrict, isBabel, isOptimized, sourceMap, namedExports, remoteUrl, remotePackages, dedupe, }) {\n    const knownNamedExports = { ...namedExports };\n    for (const filePath of PACKAGES_TO_AUTO_DETECT_EXPORTS) {\n        knownNamedExports[filePath] = knownNamedExports[filePath] || detectExports(filePath) || [];\n    }\n    if (installTargets.length === 0) {\n        logError('Nothing to install.');\n        return;\n    }\n    if (!fs.existsSync(path.join(cwd, 'node_modules'))) {\n        logError('no \"node_modules\" directory exists. Did you run \"npm install\" first?');\n        return;\n    }\n    if (isCleanInstall) {\n        rimraf.sync(destLoc);\n    }\n    const allInstallSpecifiers = new Set(installTargets.map(dep => dep.specifier));\n    const depObject = {};\n    const assetObject = {};\n    const importMap = {};\n    const installTargetsMap = {};\n    const skipFailures = !isExplicit;\n    for (const installSpecifier of allInstallSpecifiers) {\n        try {\n            const targetName = getWebDependencyName(installSpecifier);\n            const { type: targetType, loc: targetLoc } = resolveWebDependency(installSpecifier, isExplicit);\n            if (targetType === 'JS') {\n                depObject[targetName] = targetLoc;\n                importMap[targetName] = `./${targetName}.js`;\n                installTargetsMap[targetLoc] = installTargets.filter(t => installSpecifier === t.specifier);\n                installResults.push([installSpecifier, true]);\n            }\n            else if (targetType === 'ASSET') {\n                assetObject[targetName] = targetLoc;\n                installResults.push([installSpecifier, true]);\n            }\n            spinner.text = banner + formatInstallResults(skipFailures);\n        }\n        catch (err) {\n            installResults.push([installSpecifier, false]);\n            spinner.text = banner + formatInstallResults(skipFailures);\n            if (skipFailures) {\n                continue;\n            }\n            // An error occurred! Log it.\n            logError(err.message || err);\n            if (err.hint) {\n                console.log(err.hint);\n            }\n            return false;\n        }\n    }\n    if (Object.keys(depObject).length === 0 && Object.keys(assetObject).length === 0) {\n        logError(`No ESM dependencies found!`);\n        console.log(chalk.dim(`  At least one dependency must have an ESM \"module\" entrypoint. You can find modern, web-ready packages at ${chalk.underline('https://www.pika.dev')}`));\n        return false;\n    }\n    if (Object.keys(depObject).length > 0) {\n        const inputOptions = {\n            input: depObject,\n            plugins: [\n                !isStrict &&\n                    rollupPluginReplace({\n                        'process.env.NODE_ENV': isOptimized ? '\"production\"' : '\"development\"',\n                    }),\n                remoteUrl && rollupPluginRemoteResolve({ remoteUrl, remotePackages }),\n                rollupPluginNodeResolve({\n                    mainFields: ['browser:module', 'module', 'browser', !isStrict && 'main'].filter(Boolean),\n                    modulesOnly: isStrict,\n                    extensions: ['.mjs', '.cjs', '.js', '.json'],\n                    // whether to prefer built-in modules (e.g. `fs`, `path`) or local ones with the same names\n                    preferBuiltins: false,\n                    dedupe: dedupe,\n                }),\n                !isStrict &&\n                    rollupPluginJson({\n                        preferConst: true,\n                        indent: '  ',\n                    }),\n                !isStrict &&\n                    rollupPluginCommonjs({\n                        extensions: ['.js', '.cjs'],\n                        namedExports: knownNamedExports,\n                    }),\n                !!isBabel &&\n                    rollupPluginBabel({\n                        compact: false,\n                        babelrc: false,\n                        presets: [\n                            [\n                                babelPresetEnv,\n                                {\n                                    modules: false,\n                                    targets: hasBrowserlistConfig\n                                        ? undefined\n                                        : '>0.75%, not ie 11, not UCAndroid >0, not OperaMini all',\n                                },\n                            ],\n                        ],\n                    }),\n                !!isOptimized && rollupPluginTreeshakeInputs(installTargets),\n                !!isOptimized && rollupPluginTerser(),\n            ],\n            onwarn: ((warning, warn) => {\n                if (warning.code === 'UNRESOLVED_IMPORT') {\n                    // If we're using remoteUrl, we should expect them to be unresolved. (\"external\" should handle this for us, but we're still seeing it)\n                    if (remoteUrl && warning.source.startsWith(remoteUrl)) {\n                        return;\n                    }\n                    logError(`'${warning.source}' is imported by '${warning.importer}', but could not be resolved.`);\n                    if (isNodeBuiltin(warning.source)) {\n                        console.log(chalk.dim(`  '${warning.source}' is a Node.js builtin module that won't exist on the web. You can find modern, web-ready packages at ${chalk.underline('https://www.pika.dev')}`));\n                    }\n                    else {\n                        console.log(chalk.dim(`  Make sure that the package is installed and that the file exists.`));\n                    }\n                    return;\n                }\n                warn(warning);\n            }),\n        };\n        const outputOptions = {\n            dir: destLoc,\n            format: 'esm',\n            sourcemap: sourceMap === undefined ? isOptimized : sourceMap,\n            exports: 'named',\n            chunkFileNames: 'common/[name]-[hash].js',\n        };\n        const packageBundle = await rollup.rollup(inputOptions);\n        await packageBundle.write(outputOptions);\n        fs.writeFileSync(path.join(destLoc, 'import-map.json'), JSON.stringify({ imports: importMap }, undefined, 2), { encoding: 'utf8' });\n    }\n    Object.entries(assetObject).forEach(([assetName, assetLoc]) => {\n        mkdirp.sync(path.dirname(`${destLoc}/${assetName}`));\n        fs.copyFileSync(assetLoc, `${destLoc}/${assetName}`);\n    });\n    return true;\n}\nexport async function cli(args) {\n    const { help, sourceMap, babel = false, exclude = ['**/__tests__/*', '**/*.@(spec|test).@(js|mjs)'], optimize = false, include, strict = false, clean = false, dest = 'web_modules', remoteUrl = 'https://cdn.pika.dev', remotePackage: remotePackages = [], } = yargs(args);\n    const destLoc = path.resolve(cwd, dest);\n    if (help) {\n        printHelp();\n        process.exit(0);\n    }\n    const pkgManifest = require(path.join(cwd, 'package.json'));\n    const implicitDependencies = [\n        ...Object.keys(pkgManifest.dependencies || {}),\n        ...Object.keys(pkgManifest.peerDependencies || {}),\n    ];\n    const allDependencies = [\n        ...Object.keys(pkgManifest.dependencies || {}),\n        ...Object.keys(pkgManifest.peerDependencies || {}),\n        ...Object.keys(pkgManifest.devDependencies || {}),\n    ];\n    let isExplicit = false;\n    const installTargets = [];\n    const { namedExports, webDependencies, dedupe } = pkgManifest['snowpack'] || {\n        namedExports: undefined,\n        webDependencies: undefined,\n        dedupe: undefined,\n    };\n    if (pkgManifest['@pika/web']) {\n        console.log('[WARN] Update package.json \"@pika/web\" configuration to use \"snowpack\" configuration name.');\n    }\n    if (webDependencies) {\n        isExplicit = true;\n        installTargets.push(...scanDepList(webDependencies, cwd));\n    }\n    if (include) {\n        isExplicit = true;\n        installTargets.push(...scanImports({ include, exclude, knownDependencies: allDependencies }));\n    }\n    if (!webDependencies && !include) {\n        installTargets.push(...scanDepList(implicitDependencies, cwd));\n    }\n    const hasBrowserlistConfig = !!pkgManifest.browserslist ||\n        !!process.env.BROWSERSLIST ||\n        fs.existsSync(path.join(cwd, '.browserslistrc')) ||\n        fs.existsSync(path.join(cwd, 'browserslist'));\n    spinner.start();\n    const startTime = Date.now();\n    const result = await install(installTargets, {\n        isCleanInstall: clean,\n        destLoc,\n        namedExports,\n        isExplicit,\n        isStrict: strict,\n        isBabel: babel || optimize,\n        isOptimized: optimize,\n        sourceMap,\n        remoteUrl,\n        hasBrowserlistConfig,\n        remotePackages: remotePackages.map(p => p.split(',')),\n        dedupe,\n    });\n    if (result) {\n        spinner.succeed(chalk.bold(`snowpack`) +\n            ` installed: ` +\n            formatInstallResults(!isExplicit) +\n            '.' +\n            chalk.dim(` [${((Date.now() - startTime) / 1000).toFixed(2)}s]`));\n    }\n    //If an error happened, set the exit code so that programmatic usage of the CLI knows.\n    if (spinnerHasError) {\n        spinner.warn(chalk(`Finished with warnings.`));\n        process.exitCode = 1;\n    }\n}\n"],"names":["rollupPluginTreeshakeInputs","allImports","installTargetsByFile","name","options","inputOptions","key","val","Object","entries","input","filter","imp","specifier","length","some","all","resolveId","source","startsWith","load","id","fileLoc","substring","treeshakeSummary","reduce","summary","default","namespace","named","uniqueNamedImports","Set","result","join","rollupPluginRemoteResolve","remoteUrl","remotePackages","remotePackageMap","Map","has","urlSourcePath","get","external","isExternal","stripJsExtension","dep","replace","createInstallTarget","parseWebModuleSpecifier","knownDependencies","webModulesIndex","indexOf","resolvedSpecifier","includes","resolvedSpecifierWithoutExtension","getInstallTargetsForFile","filePath","code","ast","parse","plugins","sourceType","traverse","ImportDeclaration","path","webModuleSpecifier","node","value","push","specifiers","s","type","map","imported","Boolean","Import","parent","argNode","arguments","e","console","error","scanDepList","depList","cwd","nodeModulesLoc","nodePath","whitelistItem","glob","hasMagic","sync","nodir","flat","item","concat","scanImports","include","exclude","includeFiles","ignore","warn","endsWith","fs","readFileSync","sort","impA","impB","localeCompare","process","banner","chalk","bold","installResults","spinner","ora","spinnerHasError","printHelp","log","trim","formatInstallResults","skipFailures","d","yn","green","dim","red","logError","msg","stopAndPersist","symbol","cyan","fail","ErrorWithHint","Error","constructor","message","hint","PACKAGES_TO_AUTO_DETECT_EXPORTS","detectExports","resolveFrom","existsSync","keys","require","err","resolveWebDependency","isExplicit","extname","isJSFile","loc","depManifestLoc","depManifest","foundEntrypoint","module","browser","main","italic","underline","getWebDependencyName","install","installTargets","isCleanInstall","destLoc","hasBrowserlistConfig","isStrict","isBabel","isOptimized","sourceMap","namedExports","dedupe","knownNamedExports","rimraf","allInstallSpecifiers","depObject","assetObject","importMap","installTargetsMap","installSpecifier","targetName","targetType","targetLoc","t","text","rollupPluginReplace","rollupPluginNodeResolve","mainFields","modulesOnly","extensions","preferBuiltins","rollupPluginJson","preferConst","indent","rollupPluginCommonjs","rollupPluginBabel","compact","babelrc","presets","babelPresetEnv","modules","targets","undefined","rollupPluginTerser","onwarn","warning","importer","isNodeBuiltin","outputOptions","dir","format","sourcemap","exports","chunkFileNames","packageBundle","rollup","write","writeFileSync","JSON","stringify","imports","encoding","forEach","assetName","assetLoc","mkdirp","dirname","copyFileSync","cli","args","help","babel","optimize","strict","clean","dest","remotePackage","yargs","resolve","exit","pkgManifest","implicitDependencies","dependencies","peerDependencies","allDependencies","devDependencies","webDependencies","browserslist","env","BROWSERSLIST","start","startTime","Date","now","p","split","succeed","toFixed","exitCode"],"mappings":"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"}